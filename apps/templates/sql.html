{% extends 'header.html' %}
{% block content %}
    <!--main content start-->
    <style>
        #tbl_sql tbody td {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .form-group{
            margin-bottom:10px;
        }
    </style>
    <section id="main-content">
        <section class="wrapper">
            <!-- page start-->
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel">
                    <table class="table table-noborder">
                        <tbody>
                        <tr>
                            <td>Proxy Owner</td>
                            <td>
                                <select class="form-control">
                                    <option>Pls Select</option>
                                </select>
                            </td>
                            <td colspan="2"></td>
                        </tr>
                        <tr>
                            <td>时间</td>
                            <td>
                                <div class="input-prepend">
                                    <input id="reservation" type="text" class=" form-control"/>
                                </div>
                            </td>
                            <td>
                                Database Proxy
                            </td>
                            <td>
                                <select class="form-control">
                                    <option>Pls Select</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>SQL执行类型</td>
                            <td>
                                <select class="form-control">
                                    <option>正常</option>
                                    <option>错误</option>
                                    <option>拒绝</option>
                                </select>
                            </td>
                            <td>SQL Type</td>
                            <td>
                                <select class="form-control">
                                    <option>SELECT</option>
                                    <option>INSERT</option>
                                    <option>DELETE</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>SQL Like</td>
                            <td>
                                <input type="text" class="form-control">
                            </td>
                            <td>User</td>
                            <td>
                                <input type="text" class="form-control">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4" align="right">
                                <input type="button" class="btn btn-primary" onclick="doQuery()" value="查询">
                                <input type="button" class="btn btn-default" onclick="doClear()" value="清空">
                            </td>
                        </tr>
                        </tbody>
                    </table>
                        <div id="sql-detail" style="display: none;">
                          <table id="user_table" class="table table-bordered table-hover" style="cursor: pointer;">
                              <thead>
                                  <tr style="background-color: #7087a3;color: #eee;">
                                      <th>时间</th><th>Database Proxy</th><th>SQL执行类型</th><th>SQL</th><th>错误信息</th><th>执行类型</th>
                                      <th>SQL Type</th>
                                  </tr>
                              </thead>
                              <tbody>
                                  <tr data-toggle="modal" data-target="#sqlModal" data-topid="5">
                                      <td>2014/02/23 12:30:54</td><td>公司网站数据</td><td>拒绝执行</td><td>select * from city into outfile 'a.txt'</td>
                                      <td>sql error</td><td>3ms</td><td>SELECT</td>
                                  </tr>
                                  <tr data-toggle="modal" data-target="#sqlModal" data-topid="5">
                                      <td>2014/02/23 12:30:54</td><td>公司网站数据</td><td>拒绝执行</td><td>select * from city into outfile 'a.txt'</td>
                                      <td>sql error</td><td>3ms</td><td>SELECT</td>
                                  </tr>
                              </tbody>
                          </table>
                      </div>
                    </div>

                </div>
            </div>
        </section>
    </section>
    <!--main content end-->
    <!-- Modal -->
    <div class="modal" id="sqlModal" tabindex="-1" role="dialog" aria-labelledby="sqlModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="sqlModalLabel">SQL Detail</h4>
              </div>
              <div class="modal-body">
                <form class="form-horizontal" role="form">
                  <div class="form-group">
                      <label for="inputEmail1" class="col-lg-4 control-label">时间：2014/05/23 23:34:59</label>
                      <label for="inputEmail1" class="col-lg-4 control-label">Action：Allow</label>
                      <label for="inputEmail1" class="col-lg-4 control-label">执行时间：200ms</label>
                  </div>
                  <div class="form-group">
                      <label for="" class="col-lg-2 control-label">Pattern</label>
                      <div class="col-lg-10">
                        <textarea class="form-control">select * from city_list where id=? and index=?</textarea>
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="" class="col-lg-2 control-label">Parameters</label>
                      <div class="col-lg-4">
                        <textarea class="form-control" style="height: 100px;" id="parameter">
                        </textarea>
                      </div>
                      <label for="" class="col-lg-2 control-label">Metadata</label>
                      <div class="col-lg-4">
                        <textarea class="form-control" style="height: 100px;">BusinessUser = wangyu
                        </textarea>
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="" class="col-lg-2 control-label">Error</label>
                      <div class="col-lg-10">
                        <textarea class="form-control">select not allow
                        </textarea>
                      </div>
                  </div>
                </form>
                  <div class="col-lg-6">
                      <form class="form-horizontal">
                        <h5 class='page-header'>Proxy Detail</h5>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label">Proxy Name:</label>
                            <label for="" class="col-sm-8 control-label">SAP数据库</label>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label">Proxy IP:</label>
                            <label for="" class="col-sm-8 control-label">128.22.34.123</label>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label">Proxy Port:</label>
                            <label for="" class="col-sm-8 control-label">8000</label>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label">Max Connection:</label>
                            <label for="" class="col-sm-8 control-label">300</label>
                        </div>
                      </form>
                  </div>
                  <div class="col-lg-6">
                      <form class="form-horizontal">
                        <h5 class='page-header'>Connection Detail</h5>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label">Login Time:</label>
                            <label for="" class="col-sm-8 control-label">2014/12/04 14:45:12</label>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label">DB Name:</label>
                            <label for="" class="col-sm-8 control-label">Test</label>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label">Username:</label>
                            <label for="" class="col-sm-8 control-label">sa</label>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label">Protocal:</label>
                            <label for="" class="col-sm-8 control-label">10</label>
                        </div>
                      </form>
                  </div>
                  <div class="col-lg-6">
                      <form class="form-horizontal">
                        <h5 class='page-header'>Server Detail</h5>
                        <div class="form-group">
                            <label for="" class="col-sm-6 control-label">Database Server IP:</label>
                            <label for="" class="col-sm-6 control-label">128.22.34.123</label>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-6 control-label">Database Server Port:</label>
                            <label for="" class="col-sm-6 control-label">11366</label>
                        </div>
                      </form>
                  </div>
                  <div class="col-lg-6">
                      <form class="form-horizontal">
                        <h5 class='page-header'>Client Detail</h5>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label">Client IP:</label>
                            <label for="" class="col-sm-8 control-label">12.43.45.23</label>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label">Client Port:</label>
                            <label for="" class="col-sm-8 control-label">23456</label>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label">Application:</label>
                            <label for="" class="col-sm-8 control-label">Mysql JDBC Client</label>
                        </div>
                      </form>
                  </div>
              </div>
              <div class="modal-footer" style="border-top: 0px;">
                <button type="button" class="btn btn-primary">确定</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
              </div>
            </div>
          </div>
    </div>
    <script src="static/js/jquery.tagsinput.js"></script>
    <script type="text/javascript" src="static/js/ga.js"></script>
    <script type="text/javascript" src="static/assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
    <script type="text/javascript" src="static/assets/bootstrap-daterangepicker/date.js"></script>
    <script type="text/javascript" src="static/assets/bootstrap-daterangepicker/daterangepicker.js"></script>
    <script type="text/javascript" src="static/assets/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
    <script type="text/javascript" src="static/assets/ckeditor/ckeditor.js"></script>
    <script src="static/js/form-component.js"></script>
    <script>
    function doQuery(){
        $("#sql-detail").show();
    }
    function doClear(){
        $("#sql-detail").hide();
    }
    $(function(){
        var parameter = "P1 = user1\r\nP2 = 1\r\nP3 = <STREAM DATA>";
        $("#parameter").text(parameter);
    });
    </script>
{% endblock %}
